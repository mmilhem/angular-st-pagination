/*!
 * angular-st-pagination v0.3.0
 * source: git@github.com:tilmanpotthof/angular-st-pagination.git
 * license: MIT (https://raw.githubusercontent.com/tilmanpotthof/angular-st-pagination/master/LICENCE)
 */

angular.module("stPagination",[]),angular.module("stPagination").factory("StPagination",["indexUtil",function(a){"use strict";function b(a){this._inputCollection=a,this._limit=10,this._page=0,this._cachedReducedIndices={}}function c(a){return a&&a.pagination instanceof b}function d(a,b){return angular.isNumber(a)?a:b}return b.hasPagination=c,angular.extend(b.prototype,{setInputCollection:function(a){this._inputCollection=a,this.checkPageLimits()},paginatedInputCollection:function(){return this._inputCollection.slice(this.start(),this.stop())},inputCollection:function(){return this._inputCollection},start:function(){return this.offset()},stop:function(){var a=this.offset()+this.getLimit();return a<this.length()?a:this.length()},length:function(){return this._inputCollection.length},setLimit:function(a){this._limit=a},totalPages:function(){return Math.ceil(this._inputCollection.length/this.getLimit())||1},offset:function(){return this._page*this._limit},page:function(){return this._page},next:function(){this._page+=1,this.checkPageLimits()},prev:function(){this._page-=1,this.checkPageLimits()},getLimit:function(){return this._limit},setPage:function(a){if(angular.isArray(a)){var b=Math.floor((a.length-1)/2);this._page=a[b]}else this._page=a;this.checkPageLimits()},checkPageLimits:function(){this._page<0?this._page=0:this._page>this.lastPage()&&(this._page=this.lastPage())},onFirstPage:function(){return 0===this.page()},onLastPage:function(){return this.page()===this.lastPage()},onPage:function(a){return this.page()===a},lastPage:function(){return this.totalPages()-1},reducedIndices:function(b,c){b=d(b,3),c=d(c,3);var e=this.indexCacheKey(b,c);if(this._cachedReducedIndices[e])return this._cachedReducedIndices[e];var f=this.page(),g=this.totalPages(),h=a.rangeBuilder(g).foldWithMidAndEdgeRangeForIndex(f,b,c),i=h.build();return this._cachedReducedIndices[e]=i,i},indexCacheKey:function(a,b){return this.page()+"-"+this.getLimit()+"-"+this.length()+"-"+a+"-"+b},displayPage:function(){return this.page()+1},displayStart:function(){return this.start()+1}}),b}]),angular.module("stPagination").filter("stPagination",["StPagination",function(a){"use strict";return function(b,c){var d;if(b){d=c||b,a.hasPagination(d)||(d.pagination=new a(b));var e=d.pagination;return e.setInputCollection(b),e.paginatedInputCollection()}}}]),angular.module("stPagination").factory("indexUtil",function(){"use strict";function a(a){this.array=a,this.lastIndex=a.length-1}function b(a){return Array.apply(null,new Array(a)).map(function(a,b){return b})}function c(c){return new a(b(c))}return angular.extend(a.prototype,{build:function(){return this.array},foldGreaterThan:function(a){return this.foldRange(a+1,this.lastIndex)},foldGreaterEquals:function(a){return this.foldRange(a,this.lastIndex)},foldLessThan:function(a){return this.foldRange(0,a-1)},foldLessEquals:function(a){return this.foldRange(0,a)},foldRange:function(a,b){var c=this.array,d=this.array=[];return c.forEach(function(c){if(a>c||c>b||angular.isArray(c))d.push(c);else{var e=d[d.length-1];angular.isArray(e)?e.push(c):d.push([c])}}),this},foldFixedLengthForIndex:function(a,b){return this.foldWithMidAndEdgeRangeForIndex(a,b,b)},foldWithMidAndEdgeRangeForIndex:function(a,b,c){var d=0+c,e=a-b,f=a+b,g=this.lastIndex-c;return c+b>=a?(d=c+2*b,this.foldRange(d,g)):a>=this.lastIndex-(c+b)?(g=this.lastIndex-(c+2*b),this.foldRange(d,g)):this.foldRange(d,e).foldRange(f,g)}}),{range:b,rangeBuilder:c}}),angular.module("stPagination").filter("displayPaginationIndex",function(){"use strict";return function(a){return angular.isNumber(a)?a+1:angular.isArray(a)?"...":a}}),angular.module("stPagination").directive("stPaginationLimit",["StPagination",function(a){"use strict";var b=[10,20,50];return{restrict:"E",replace:!0,template:'<select ng-options="limit for limit in limits()" ng-model="pagination._limit"></select>',scope:{collection:"=",getLimits:"&limits"},link:function(c){c.limits=function(){return c.getLimits()||b},c.$watch("collection",function(b){a.hasPagination(b)?c.pagination=b.pagination:delete c.pagination})}}}]),angular.module("stPagination").directive("stPagination",["StPagination","$parse",function(a,b){"use strict";function c(a){return angular.extend({divWrapped:!1,selectedClass:"active",disabledClass:"disabled"},a)}function d(a){var d=b(a)({});if(angular.isObject(d))return c(d);if(a=a||i,d=g[a],void 0!==d)return c(d);var e='Given css-config attribute "'+a+'" is not in allowed values '+h;throw new Error(e)}var e=["-webkit-touch-callout","-webkit-user-select","-moz-user-select","-ms-user-select","user-select"],f='<ul><li ng-class="{%DISABLED_CLASS%: pagination.onFirstPage()}"><a ng-click="pagination.prev()">&laquo;</a></li><li ng-class="{%SELECTED_CLASS%: pagination.onPage(index)}" ng-repeat="index in pagination.reducedIndices(midRange, edgeRange)"><a ng-click="pagination.setPage(index)">{{ index | displayPaginationIndex }}</a></li><li ng-class="{%DISABLED_CLASS%: pagination.onLastPage()}"><a ng-click="pagination.next()">&raquo;</a></li></ul>',g={list:{},divWrappedList:{divWrapped:!0},bootstrap3:{},bootstrap2:{divWrapped:!0},zurbFoundation:{selectedClass:"current",disabledClass:"unavailable"}},h='"'+Object.keys(g).join('", "')+'"',i="list";return{restrict:"E",replace:!0,scope:{collection:"=",edgeRange:"=",midRange:"="},template:f,compile:function(a,b){var c=d(b.cssConfig);c.divWrapped?a.wrap('<div class="pagination"></div>'):a.addClass("pagination"),angular.forEach(a.find("li"),function(a){var b=angular.element(a),d=b.attr("ng-class");d=d.replace("%DISABLED_CLASS%",c.disabledClass),d=d.replace("%SELECTED_CLASS%",c.selectedClass),b.attr("ng-class",d)})},controller:["$scope","$element","$attrs",function(b,c,d){angular.forEach(e,function(a){c.css(a,"none")});var f=d.collection;b.$watch("collection",function(c){if(angular.isArray(c)){if(!a.hasPagination(c)){var d='Collection "'+f+'" in the pagination directive is not used with a neccessary pagination filter.';throw new Error(d)}b.pagination=c.pagination}})}]}}]),angular.module("stPagination").filter("stPageInfo",["StPagination",function(a){"use strict";var b={total:"length",totalPages:"totalPages",currentPage:"displayPage",startIndex:"displayStart",stopIndex:"stop"};return function(c,d){if(a.hasPagination(c)&&d){var e=b[d];if(!e)throw new Error('No display property "'+d+'" defined for the stPageInfo filter');return c.pagination[e]()}return c}}]);
//# sourceMappingURL=angular-st-pagination.min.js.map